!function(t){function n(a){if(e[a])return e[a].exports;var r=e[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="http://static.12301.cc/assets/build/prod/",n(0)}({0:function(t,n,e){e(89);var a=e(5),r=e(44),i=e(91),s=e(92),o=e(52),l=Backbone.View.extend({el:$("#memDetailContainer"),initialize:function(){var t=this,n=this.memberid=PFT.Util.UrlParse().id;this.pagination=new o({container:"#paginationContainer",keyup:!1,onNavigation:function(e){var a=e.toPage;t.getHistory(n,a)}}),this.getDetail(n),this.getHistory(n)},template:_.template(i),history_template:_.template(s),cache:!0,historyCache:{},getDetail:function(t){var n=this;return t?void PFT.Util.Ajax(a.Url.memdetail.detail,{params:{memberid:t},loading:function(){var t=r("加载中，请稍后..",{tag:"div",height:500,css:{background:"#fff"}});n.$el.html(t)},complete:function(){n.$el.html("")},success:function(t){t=t||{};var e=t.data||{};200==t.code?n.$el.html(n.template({data:e})):alert(t.msg||PFT.AJAX_ERROR_TEXT)}}):!1},getHistory:function(t,n,e){if(!t)return!1;n=n||1,e=e||10;var i=this,s=$("#historyListContainer"),o=this.history_template,l=this.pagination,c=this.historyCache[n];if(c&&this.cache){var d=c.page,p=c.total_page,u=c.list,m=o({data:u});s.html(m),l.render({current:d,total:p})}else PFT.Util.Ajax(a.Url.memdetail.history,{params:{memberid:t,page:n,page_size:e},loading:function(){var t=r("加载中，请稍后..",{tag:"tr",height:150,colspan:8,css:{background:"#fff"}});s.html(t),l.render(null)},complete:function(){s.html("")},success:function(t){t=t||{};var e=t.data||{};if(200==t.code){var a=e.page,r=e.total_page,c=e.list||[];0==c.length&&(r=0);var d=o({data:c});s.html(d),l.render({current:a,total:r}),i.historyCache[n]=e}else alert(t.msg||PFT.AJAX_ERROR_TEXT)}})}});$(function(){new l})},5:function(t,n){var e=function(){},a={Url:{PublishCardProd:{submit:"/r/product_scenic/save/",uploadFile:"/r/product_AnnualCard/uploadImg/",getInfo:"/r/product_scenic/get/"},PackageInfo:{updateTicket:"/r/product_ticket/UpdateTicket/",getPackageInfoList:"/r/product_ticket/ticket_attribute/",getLands:"/r/product_AnnualCard/getLands/",getTickets:"/r/product_AnnualCard/getTickets/",deleteTicket:"/route/index.php?c=product_ticket&a=set_status"},EntryCard:{getProdList:"/r/product_AnnualCard/getAnnualCardProducts/",createAnnualCard:"/r/product_AnnualCard/createAnnualCard/",getAnnualCards:"/r/product_AnnualCard/getAnnualCards/"},makeOrder:{getCardsForOrder:"/r/product_AnnualCard/getCardsForOrder/",getOrderInfo:"/r/product_AnnualCard/getOrderInfo/",isNeedToReplace:"/r/product_AnnualCard/isNeedToReplace/",submit:"/formSubmit_v01.php"},getVirtualStorage:"/r/product_AnnualCard/getVirtualStorage/",storage:{getList:"/r/product_AnnualCard/getAnnualCardStorage/",deleteAnnualCard:"/r/product_AnnualCard/deleteAnnualCard/"},ordersuccess:{getOrderDetail:"/r/product_AnnualCard/orderSuccess/"},active:{checkCard:"/r/product_AnnualCard/activeCheck/",getVCode:"/r/product_AnnualCard/sendVcode/",activateForPc:"/r/product_AnnualCard/activateForPc/"},mclist:{getList:"/r/product_AnnualCard/getMemberList/"},memdetail:{detail:"/r/product_AnnualCard/getMemberDetail/",history:"/r/product_AnnualCard/getHistoryOrder/"}},defaults:{type:"get",ttimout:6e4,loading:e,complete:e,success:e,fail:e,timeout:e,serverError:e}};t.exports=a},44:function(t,n){var e=function(t,n){t=t||"请稍后...",n=n||{};var e=n.tag||"div";"td"==e&&(e="tr");var a=n.width+"px"||"100%",r=n.height||150,i=n.loadingImg||{},s=i.width||24,o=i.top||0,l=n.className||"",c=n.colspan||1,d=n.id||"",p="",u=n.css||{},m="";for(var h in u)m+=h+":"+u[h]+"; ";var g="http://static.12301.cc/assets/build/images/gloading.gif";return p+="<"+e+' id="'+d+'" style="width:'+a+"; height:"+r+"px; line-height:"+r+"px; text-align:center; "+m+'" class="'+l+'">',"tr"!=e&&"td"!=e||(p+='<td style="text-align:center" colspan="'+c+'">'),p+='<img style="width:'+s+"px; position:relative; top:"+o+'px; vertical-align:middle; margin-right:5px" src="'+g+'"/>',p+='<span class="t">'+t+"</span>","tr"!=e&&"td"!=e||(p+="</td>"),p+="</"+e+">"};t.exports=e},52:function(t,n,e){function a(t){this.opt=$.extend(r,t||{}),this.init(this.opt)}e(53);var r={container:"",onNext:function(){},onPrev:function(){},onNavigation:function(){},keyup:!1};a.prototype={init:function(t){var n=this;this.tpl=e(55),this.container="string"==typeof t.container?$("#"+t.container.replace(/#/,"")):t.container,this.container.hide().html(this.tpl),this.currentPage=this.container.find(".whichPageInp"),this.totalPage=this.container.find(".totalPageInp"),this.nextBtn=this.container.find(".nextPageBtn"),this.prevBtn=this.container.find(".prevPageBtn"),t.keyup&&($(document).on("keyup",function(t){n.onKeyupToNav(t)}),this.container.find(".keyupTip").show()),this.container.on("click",".navBtn",function(t){n.onNavBtnClick(t)})},onNavBtnClick:function(t){var n=$(t.currentTarget);if(n.hasClass("disable"))return!1;var e=1*this.currentPage.text(),a=n.hasClass("next")?"next":"prev",r=n.hasClass("next")?e+1:e-1,i={dir:a,fromPage:e,toPage:r};"next"==a?(this.opt.onNavigation(i),this.opt.onNext(i),PFT.Util.PubSub.fire("navigation",i),PFT.Util.PubSub.fire("next",i)):(this.opt.onNavigation(i),this.opt.onPrev(i),PFT.Util.PubSub.fire("navigation",i),PFT.Util.PubSub.fire("prev",i))},onKeyupToNav:function(t){var n=t.keyCode,e=this.nextBtn,a=this.prevBtn,r=1*this.currentPage.text(),i=null;39!=n||e.hasClass("disable")?37!=n||a.hasClass("disable")||(i={dir:"next",fromPage:r,toPage:r-1},this.opt.onNavigation(i),this.opt.onPrev(i),PFT.Util.PubSub.fire("navigation",i),PFT.Util.PubSub.fire("prev",i)):(i={dir:"next",fromPage:r,toPage:r+1},this.opt.onNavigation(i),this.opt.onNext(i),PFT.Util.PubSub.fire("navigation",i),PFT.Util.PubSub.fire("next",i))},on:function(t,n){return t?(n="function"==typeof n?n:function(){},void PFT.Util.PubSub.on(t,n)):!1},show:function(){this.container.show()},hide:function(){this.container.hide()},getValue:function(){return{current:this.currentPage.text(),total:this.totalPage.text()}},render:function(t){if(!t)return this.nextBtn.addClass("disable"),this.prevBtn.addClass("disable"),void this.hide();var n=1*t.total,e=1*t.current,a=this.totalPage,r=this.currentPage,i=this.nextBtn,s=this.prevBtn;return 0==n?(this.nextBtn.addClass("disable"),this.prevBtn.addClass("disable"),void this.hide()):(this.show(),a.text(n),r.text(e),void(n>e?(1!=e?s.removeClass("disable"):s.addClass("disable"),i.removeClass("disable")):(1!=e?s.removeClass("disable"):s.addClass("disable"),i.addClass("disable"))))}},t.exports=a},53:function(t,n){},55:function(t,n){t.exports='<div class="navigationBar">\r\n    <div class="navCon">\r\n        <a href="javascript:void(0)" class="navBtn next nextPageBtn disable"><span class="iconfont">&#xe60d;</span></a>\r\n        <a href="javascript:void(0)" class="prevPageBtn navBtn prev disable"><span class="iconfont">&#xe60c;</span></a>\r\n        <div class="which">\r\n            <span class="whichPageInp pagenum">1</span>\r\n            <span class="var"> / </span>\r\n            <span class="totalPageInp pagenum">1</span>\r\n        </div>\r\n    </div>\r\n    <p style="display:none" class="tip keyupTip">亲，可以使用键盘前后方向键来翻页哟</p>\r\n</div>'},89:function(t,n){},91:function(t,n){t.exports='<% var member=data.member, list=data.list || [], history=data.history; %>\r\n<% var statusTxt = {"1":"正常","0":"未激活","2":"禁用","4":"挂失"}; %>\r\n<div class="memberBox" style="background:#e2f6fe">\r\n    <span class="memberH">H</span>\r\n    <ul class="memUl">\r\n        <li>\r\n            <p><span class="memL">会员名称：</span><span class="memR"><%=member.account%></span></p>\r\n        </li>\r\n        <li>\r\n            <p><span class="memL">手机号：</span><span class="memR"><%=member.mobile%></span></p>\r\n        </li>\r\n    </ul>\r\n</div>\r\n<%_.each(list,function(item){%>\r\n<div style="background:#fff; border-top:1px solid #e5e5e5" class="memberBox">\r\n    <ul class="memUl marL-70">\r\n            <li>\r\n                <p><span class="memL">虚拟卡号：</span><span class="memR"><%=item.virtual_no%></span></p>\r\n                <p><span class="memL">实体卡号：</span><span class="memR"><%=item.card_no%></span></p>\r\n                <p><span class="memL">物理ID：</span><span class="memR"><%=item.physics_no%></span></p>\r\n                <!--<p><span class="memL">可用优惠券：</span><span class="memR">0</span></p>-->\r\n                <p><span class="memL">发卡商户：</span><span class="memR"><%=item.supply%></span></p>\r\n            </li>\r\n            <li>\r\n                <p><span class="memL">卡套餐：</span><span class="memR"><%=item.title%></span></p>\r\n                <p><span class="memL">有效期：</span><span class="memR"><%=item.valid_time%></span></p>\r\n                <div class="memLine">\r\n                    <span class="memL">已用特权：</span>\r\n                    <div class="memR">\r\n                        <%_.each(item.priv,function(priv){%>\r\n                            <p><%=priv.title%> <%=priv.use%></p>\r\n                        <%})%>\r\n                    </div>\r\n                </div>\r\n                <p><span class="memL">状态：</span><span class="memR font-orange"><a href="javascript:void(0);" class="unActivate"><%=statusTxt[item.status]%></a></span></p>\r\n                <p><span class="memL">备注：</span></p>\r\n            </li>\r\n    </ul>\r\n</div>\r\n<%})%>\r\n\r\n'},92:function(t,n){t.exports='<% if(data.length){ %>\r\n    <%_.each(data,function(item,index){%>\r\n        <tr class="<%=index!=data.length-1? \'border-bottom\' : \'\'%>">\r\n            <td class="font-blue"><%=item.ordernum%></td>\r\n            <td><%=item.ltitle%> - <%=item.title%></td>\r\n            <td><%=item.totalmoney/100%></td>\r\n            <td class="font-orange"><%=item.tnum%></td>\r\n            <td><%=item.ordertime%></td>\r\n        </tr>\r\n    <% }) %>\r\n<% }else{ %>\r\n<tr>\r\n    <td style="text-align:center; height:300px" colspan="8">暂无使用记录...</td>\r\n</tr>\r\n<% } %>\r\n\r\n\r\n'}});
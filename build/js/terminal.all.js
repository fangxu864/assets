!function(t){function e(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){a(6),a(8);var n=a(1),i=a(5),r=a(4),s=RichBase.extend({init:function(){this.searchOrderBtn=$("#termSearBtn"),this.voucherInp=$("#termSearInp"),this.product=new i({container:$("#productListPage")}),this.orderList=new r,this.bindEvents()},bindEvents:function(){var t=this;if(this.searchOrderBtn.on("click",function(e){t.onSearchOrderBtnClick(t,e)}),!1 in document.createElement("input")){var e="凭证码 / 手机号";this.voucherInp.on("focus",function(t){var a=$(t.currentTarget);a.val()==e&&a.val("")}),this.voucherInp.on("blur",function(t){var a=$(t.currentTarget);a.val()||a.val(e)})}},onSearchOrderBtnClick:function(t,e){var a=t.searchOrderBtn,i=$.trim(t.voucherInp.val());return a.hasClass("disable")||!i?!1:void t.orderList.query(n.getSalerid(),i)}});$(function(){new s})},function(t,e){var a={DEFAULT_IMG:"http://www.12301.cc/images/defaultThum.jpg",LOADING_IMG:"http://www.12301.cc/images/icons/gloading.gif",PMODE:{0:"账户余额支付",1:"支付宝支付",2:"授信支付",3:"产品自销",4:"现场支付",5:"微信支付"},PAYSTATUS:{0:"景区到付",1:"已成功",2:"未支付"},ORDERSTATUS:{0:"未使用",1:"已使用",2:"已过期",3:"已取消",4:"凭证码被替代",5:"被终端撤销(已取消)",6:"被终端撤销(已使用)"},fn:new Function,api:{fetchProduct:"terminal_chk.html",terminal:function(){return $("#apiHideInp").val()},queryOrder:function(){return $("#apiHideInp").val()}},AJAX_TIMEOUT:6e4,AJAX_TIMEOUT_TEXT:"请求超时，请稍后重试",AJAX_ERROR_TEXT:"请求出错，请稍后重试",isObjectEmpty:function(t){var e=!0;for(var a in t){e=!1;break}return e},getSid:function(){return $("#gsid").val()||""},getSalerid:function(){return $.trim($("#term_prodNum").text())||""},getVoucher:function(){return $.trim($("#termSearInp").val())},checkIsAdmin:function(){return $("#isAdmin").val()},fetchProduct:function(t,e){var a,n=this,t=t||{},e=e||{},i=this.api.fetchProduct,r=this.fn,s=t.keyword||"",o=t.sid||"",c=e.loading||r,l=e.removeLoading||r,d=e.timeout||function(){alert(this.AJAX_TIMEOUT_TEXT)},h=e.serverError||function(){alert(this.AJAX_ERROR_TEXT)},u=e.empty||r,m=e.success||r,p=e.fail||r;return a=PFT.Ajax({url:i,type:"get",dataType:"json",ttimeout:1e3*n.AJAX_TIMEOUT,data:{action:"queryproduct",keyword:s,sid:o},loading:function(){c()},removeLoading:function(){l()},timeout:function(t){d(t)},serverError:function(t){h(t)}},function(t){"success"==t.status?t.list&&t.list.length>0?m(t):u(t):p(t)})},queryOrder:function(t,e,a){var n=this;if(!t||!e)return!1;t=$.trim(t),e=$.trim(e);var i=this.api.queryOrder(),r=this.fn,a=a||{},s=a.loading||r,o=a.removeLoading||r,c=a.success||r,l=a.empty||r,d=a.unlogin||r,h=a.fail||r,u=a.timeout||function(){alert(n.AJAX_TIMEOUT_TEXT)},m=a.serverError||function(){alert(n.AJAX_ERROR_TEXT)},p={query:1,salerid:t,voucher:e};PFT.Ajax({url:i,type:"get",dataType:"json",data:p,ttimeout:n.AJAX_TIMEOUT,loading:function(){s()},removeLoading:function(){o()},timeout:function(t){console.log("timeout"),u(t)},serverError:function(t){console.log("timeout"),m(t)}},function(t){var t=t||{},e=t.status,a=t.code;if("success"==e){var i=t.orders;i&&!n.isObjectEmpty(i)?c(t):l(t)}else"fail"==e&&0==a?d(t):"fail"==e&&t.msg&&h(t)})},terminal:function(t,e){var a=this,n=this.api.terminal(),t=t||{},e=e||{},i=this.fn,r=t.check_method||0,s=t.salerid||"",o=t.ordernum||"",c=t.list||"",l=t.rtime||"",d=e.loading||i,h=e.removeLoading||i,u=e.success||i,m=e.fail||i,p=e.unlogin||i,f=e.timeout||function(){alert(a.AJAX_TIMEOUT_TEXT)},v=e.serverError||function(){alert(a.AJAX_ERROR_TEXT)},g={check:1,salerid:s,ordernum:o,check_method:r,list:c,rtime:l};PFT.Ajax({url:n,type:"post",dataType:"json",data:{data:PFT.Help.JSON.stringify(g)},loading:function(){d()},removeLoading:function(){h()},timeout:function(){f()},serverError:function(){v()}},function(t){var t=t||{},e=t.status,n=t.code,i=t.msg;"success"==e?u(t):"fail"==e&&0==n?p(t):(t.msg=i||a.AJAX_ERROR_TEXT,m(t))})}};t.exports=a},function(t,e){var a={strpad:function(t){return t=String(t),1==t.length?"0"+t:t},outputHtml:function(t,e){var a=this,e=e||"todayValid";t||(t=this.gettoday()),t=10==t.length?t.substring(0,7):t;var n=new Date;n.setHours(0,0,0,0),n=n.getTime();var i=t+"-01";i=i.split("-"),i=i.join("/");var r=new Date(i),s=r.getFullYear(),o=r.getMonth()+1,c=o-1==0?12:o-1,l=o+1==13?1:o+1,d=new Date(r.getFullYear(),r.getMonth()+1,0).getDate(),h=d,u=r.getDay(),m=t+"-"+d;m=m.split("-"),m=m.join("/");var p=new Date(m);d+=r.getDay()+(7-p.getDay()),r.setTime(r.getTime()-864e5*r.getDay());for(var f=new Date(this.gettoday()).getTime().toString(),v="lastmonth_none",g="nextmonth_none",y='<div class="calendar" id="calendarContent"><div class="monthbox"><div id="calendarHead" class="title calendarHead" data-date="'+s+"-"+o+'"><span class="lastmonth '+v+'"><a title="'+c+'月">&nbsp;</a></span><span class="nextmonth '+g+'"><a title="'+l+'月">&nbsp;</a></span><span class="year">'+s+"年"+o+'月</span><span class="close"></span></div><table><tr><th class="weeken">日</th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th class="weeken">六</th></tr>',k=0;d-1>k;k++){k%7==0&&(y+="<tr>");var T=r.getFullYear()+"-"+this.strpad(r.getMonth()+1)+"-"+this.strpad(r.getDate()),_=(r.getTime(),a.strpad(r.getDate()));y+=u>k||k>=h+u?'<td><div class="detail"></div></td>':"allValid"==e?'<td><div class="detail valid" date="'+T+'"><span class="dateNum">'+_+"</span></div></td>":r.getTime()<n||"todayUnvalid"==e&&r.getTime()<f?'<td><div class="detail"><span class="dateNum">'+_+"</span></div></td>":'<td><div class="detail valid" date="'+T+'"><span class="dateNum">'+_+"</span></div></td>",k%7==6&&(y+="</tr>"),r.setTime(r.getTime()+864e5)}return y+="</table></div>"},outputDate:function(t){var e=this;t||(t=this.gettoday()),t=10==t.length?t.substring(0,7):t;var a=new Date;a.setHours(0,0,0,0),a=a.getTime();var n=t+"-01";n=n.split("-"),n=n.join("/");var i=new Date(n),r=i.getMonth()+1,s=new Date(i.getFullYear(),i.getMonth()+1,0).getDate(),o=s,c=i.getDay(),l=t+"-"+s;l=l.split("-"),l=l.join("/");var d=new Date(l);s+=i.getDay()+(7-d.getDay()),i.setTime(i.getTime()-864e5*i.getDay());for(var h=[],u=[],m=0;s-1>m;m++){var p={},f=i.getFullYear()+"-"+this.strpad(i.getMonth()+1)+"-"+this.strpad(i.getDate()),v=e.strpad(i.getDate());p.weeken=m%7,c>m?(p.day="",p.month=r-1):m>=o+c?(p.day="",p.month=r+1):i.getTime()<a?(p.day=v,p.date=f,p.today="before",p.month="current",p.yearmonth=t):i.getTime()==a?(p.day=v,p.date=f,p.today="today",p.month="current",p.yearmonth=t):(p.day=v,p.date=f,p.today="after",p.month="current",p.yearmonth=t),u.push(p),7==u.length&&(h.push(u),u=[]),i.setTime(i.getTime()+864e5)}return h},getnowdate:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=this.strpad(a);var n=t.getDate();return n=this.strpad(n),e+"-"+a+"-"+n},nextday:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),i=new Date(e,a,0),r=i.getDate(),s=n+1;return s>r&&(s="01",a++,a>12&&(a="01",e++)),s=this.strpad(s),a=this.strpad(a),e+"-"+a+"-"+s},nextMonth:function(t){return this._siblingMonth(t,"next")},prevMonth:function(t){return this._siblingMonth(t,"prev")},_siblingMonth:function(t,e){t=t||"",t=7==t.length?t:10==t.length?t.substring(0,7):this.gettoday().substring(0,7),e||(e="next");var a=t+"-01";a=a.split("-"),a=a.join("/"),a=new Date(a);var n=new Date(a.getFullYear(),a.getMonth()-1,1),i=n.getFullYear()+"-"+this.strpad(n.getMonth()+1),r=new Date(a.getFullYear(),a.getMonth()+1,1),s=r.getFullYear()+"-"+this.strpad(r.getMonth()+1);return"next"==e?s:i},gettoday:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=this.strpad(a);var n=t.getDate();return n=this.strpad(n),e+"-"+a+"-"+n},getCurYearmonth:function(){return $("#calendarHead").attr("data-date")}};t.exports=a},function(t,e,a){a(7);var n=a(2),i=new Function,r=RichBase.extend({selected:{},curYearmonth:"",init:function(t){var t=t||{};this.container=t.container||$('<div id="calendar-pop-container" class="calendar-pop-contaienr"></div>').appendTo($("body")),this.containerID=this.container.attr("id"),this.selected[this.containerID]=[],this.mult="boolean"==typeof t.mult?t.mult:!1,this.tpl=t.tpl||a(9),this.template=_.template(this.tpl),this.maskID=this.containerID+"-mask",this.mask=$("#"+this.maskID),this.mask.length||(this.mask=$('<div id="'+this.maskID+'" class="calendar-mask"></div>'),this.mask.appendTo($("body"))),this.bindEvents()},bindEvents:function(){var t=this;this.container.on("click",".calendar-td",function(e){return t.onTdClick(t,e),!1}),this.container.on("click",".monthNavBtn",function(e){return t.onMonthBtnClick(t,e),!1}),this.mask.on("click",function(e){t.close()})},showDate:function(t,e){var a=this,e=e||{},n=this.containerID,t=t||this.getYearMonth(),r=t.substring(0,7),s=this.container,o=e.onBefore||i,c=e.onAfter||i;a.fire("showDate.before",t),o();var l=this.render(r);s.html(l),a.fire("showDate.after",t),c(),this.setCurYearmonth(r),setTimeout(function(){$("#"+n+"-calendar-td-"+t).addClass("selected")},10)},onTdClick:function(t,e){var a=t.mult,n=$(e.currentTarget);if(n.hasClass("empty"))return!1;var i=n.attr("data-day"),r=n.attr("data-date"),s=n.attr("data-week"),o=n.attr("data-yearmonth");n.toggleClass("selected");var c=n.hasClass("selected")?"select":"cancel";a||(t.container.find(".calendar-td").removeClass("selected"),"select"==c&&n.addClass("selected"));var l={tarDom:n,type:c,date:r,week:s,day:i,yearmonth:o},d=t.selected[t.containerID];if("select"==c)a||d.splice(0,1),d.push(l);else for(var h in d){var u=d[h],m=u.tarDom.attr("data-date");if(r==m){d.splice(h,1);break}}t.setCurYearmonth(o+"-"+i),t.fire("click",l)},onMonthBtnClick:function(t,e){var a=$(e.currentTarget),i=t.getCurYearmonth(),r=a.hasClass("next")?n.nextMonth(i):n.prevMonth(i);t.showDate(r)},getYearMonth:function(t){var t=t||n.gettoday(),e=10==t.length?t.substring(0,7):t;return e},render:function(t){if(!t)return"";var e=this.containerID,a=n.outputDate(t),i=this.template({data:{containerID:e,yearmonth:t,dates:a}});return i},getCurYearmonth:function(){return this.curYearmonth},setCurYearmonth:function(t){this.curYearmonth=t,$("#"+this.containerID+"-top-calendar-date").text(this.curYearmonth)},position:function(t){var e=t.top,a=t.left;this.container.css({top:e,left:a})},show:function(t,e){this.container.show(),this.showDate(t,e),this.mask.show()},close:function(){this.container.hide(),this.mask.hide()}});t.exports=r},function(t,e,a){var n=a(1),i=a(10),r=a(3),s=RichBase.extend({init:function(){this.listUl=$("#myOrderList"),this.template=_.template(i),this.calendar=new r,this.bindEvents()},dateInp:null,bindEvents:function(){var t=this;this.listUl.on("click",".checkBtn",function(e){t.onCheckBtnClick(t,e)}),this.listUl.on("focus",".countInp",function(e){t.onCountInpFocus(t,e)}),this.listUl.on("blur",".countInp",function(e){t.onCountInpBlur(t,e)}),this.listUl.on("click",".termTimeWrap",function(e){var a=$(e.currentTarget).find(".termTimeInp"),n=a.val(),i=a.offset();t.calendar.show(n,{onBefore:function(){t.dateInp=a,t.calendar.position({top:i.top+$(e.currentTarget).height()+2,left:i.left-6})}})}),this.calendar.on("click",function(e){t.dateInp.val(e.date),t.calendar.close()})},onCountInpFocus:function(t,e){var a=$(e.currentTarget);$.trim(a.val());a.attr("data-lastval",a.val())},onCountInpBlur:function(t,e){var a=$(e.currentTarget),n=(1*$.trim(a.val()),a.attr("data-lastval")),i=(1*a.attr("data-maxnum"),t.validate_countInp(a));return i?void 0:a.val(n)},onCheckBtnClick:function(t,e){var a=$(e.currentTarget);if(a.hasClass("disable"))return!1;var i=a.parents(".inCon"),r=a.attr("data-mainordernum"),s=n.getSalerid(),o=i.find("input[type=radio]:checked").val(),c=i.find(".ticketUl .ticketLi"),l=function(){var t={},e=0;return c.each(function(){var a=$(this),n=a.find(".countInp"),i=n.attr("data-ordernum"),r=n.val();e+=1*r,t[i]=r}),0==e?0:t}(),d=i.find(".termTimeInp").val()||"",h=i.find(".errorTip");return 0==l?1==c.length?alert("验证票数不能为0"):alert("验证票数不能全为0"):void n.terminal({check_method:o,salerid:s,ordernum:r,list:l,rtime:d},{loading:function(){h.hide(),a.addClass("disable").text("正在验证...")},removeLoading:function(){a.removeClass("disable").text("验 证")},success:function(e){PFT.Help.AlertTo("success",'<p style="width:200px">验证成功</p>'),i.find(".ticketLi").each(function(){var e=$(this),a=e.find(".countInp"),n=1*a.val(),i=e.find(".trnameCol .un_terminal_tnum"),r=e.find(".total_tnum"),s=1*r.text(),c=1*i.text();0==o?(i.text(0),r.text(s-(c-n)),a.val(0)):1==o&&(i.text(c-n),a.val(c-n)),t.setCountInpMax()})},unlogin:function(t){h.show().html('登录状态已过期，请重新<a style="margin:0 2px;" href="dlogin_n.html">登录</a>')},fail:function(t){a.text("重新验证"),h.show().html(t.msg)}})},query:function(t,e){var a=this;n.queryOrder(t,e,{loading:function(){a.render("loading",null)},removeLoading:function(){a.render("removeLoading",null)},success:function(t){a.render("success",t)},empty:function(t){a.render("empty",t)},fail:function(t){a.render("fail",t)},unlogin:function(t){a.render("unlogin",t)}})},setCountInpMax:function(){this.listUl.find(".countInp").each(function(){var t=$(this),e=t.parents(".ticketLi"),a=1*e.find(".un_terminal_tnum").text();t.attr("data-maxnum",a)})},validate_countInp:function(t){var e=1*t.val(),a=0,n=1*t.attr("data-maxnum");return!(!PFT.Help.isPositiveNum(e,!0)||a>e||e>n)},render:function(t,e){var a=this.listUl,i="";if("loading"==t)i='<li class="sta loading"><img class="loadingImg" src="'+n.LOADING_IMG+'" alt=""/><span class="t">请稍后...</span></li>',a.html(i);else if("removeLoading"==t)a.html("");else if("success"==t)i=this.template({data:e.orders}),a.html(i);else if("empty"==t)a.html('<li class="sta empty"><span class="t">查无匹配订单</span></li>');else if("unlogin"==t)a.html('<li class="sta unlogin"><span class="t">未登录或登录状态已过期，请重新<a style="margin:0 3px;" href="dlogin_n.html">登录</a></span></li>');else if("fail"==t){var r=e.msg||n.AJAX_ERROR_TEXT;a.html('<li class="sta fail"><span class="t">'+r+"</span></li>")}}});t.exports=s},function(t,e,a){var n=a(1),i=RichBase.extend({statics:{SEARCH_FLAG:!0,cacheData:null},EVENTS:{click:{"":"onContainerClick",".productListBox":"onProductListBoxClick",".listUl .pItem":"onItemClick"},keyup:{".searchInp":"onSearchInpKeyup"}},PRODUCT_COUNT_TRIGGER_SEARCH:50,cacheData:null,init:function(t){var e=this;this.container=t.container,this.selectBox=this.container.children(),this.searchBox=this.container.find(".searchBox"),this.listUl=this.container.find(".listUl"),this.searchInp=this.container.find(".searchInp"),this.triggerInp=$("#prodSearchInp");var a=n.getSid();this.triggerInp.on("click",function(){return a?!1:void e.showSelect()}),n.fetchProduct({sid:a},{loading:function(){e.showProdStatus(),$("#prodBoxStatus").html('<img class="loading" src="'+n.LOADING_IMG+'"/><span class="t">正在加载产品...</span>')},removeLoading:function(){e.hideProdStatus()},success:function(t){var i=t.list;e.statics.cacheData=i,e.render(i),a||!n.checkIsAdmin()&&i.length<50?e.searchBox.hide():e.searchBox.show(),setTimeout(function(){e.listUl.children().first().trigger("click")},10)},empty:function(t){e.showProdStatus(),$("#prodBoxStatus").show().html('<span class="t">没有产品...</span>')},fail:function(t){alert(t.msg||n.AJAX_ERROR_TEXT)}})},onContainerClick:function(t,e){t.closeSelect()},onProductListBoxClick:function(t,e){e.stopPropagation(),e.preventDefault()},onSearchInpKeyup:function(t,e){var a=t.searchInp,n=a.val(),i=t.filterData(n);t.render(i)},onItemClick:function(t,e){var a=$(e.currentTarget),n=a.attr("data-id"),i=a.attr("data-salerid"),r=a.attr("data-terminal"),s=a.text(),o=a.attr("data-img");a.addClass("active").siblings().removeClass("active"),$("#term_prodId").text(n),$("#term_termNum").text(r),$("#term_prodNum").text(i),t.triggerInp.val(s),t.loadPhotoImg(n,o),t.closeSelect()},filterData:function(t){var e=this.statics.cacheData,a=[];if(!t)return e;for(var n in e){var i=e[n],r=i.title;r.indexOf(t)>-1&&a.push(i)}return a},posSelect:function(){var t=this.triggerInp,e=t.offset();this.selectBox.css({left:e.left,top:e.top+36})},showSelect:function(){this.container.show(),this.searchInp.focus(),this.posSelect()},closeSelect:function(){this.container.hide()},showProdStatus:function(){$("#prodPhoto").hide(),$("#prodMsg").hide(),$("#prodBoxStatus").show()},hideProdStatus:function(){$("#prodPhoto").show(),$("#prodMsg").show(),$("#prodBoxStatus").hide()},loadPhotoImg:function(t,e){if(!e)return!1;var a=$("#prodPhoto"),n=$("#photoImg"+t),i=a.children(".loading");$(i).attr("src",e),n.length?n.show().siblings().hide():PFT.Help.LoadImage(a,e,{loading:function(){a.children(".loading").show().siblings().hide()},success:function(e,a,n){e.children().hide(),n=$(n),n.attr("id","photoImg"+t).attr("width",e.width()).attr("height",e.height()).show().appendTo(e)},error:function(){a.children(".error").show().siblings().hide()}})},render:function(t){var e=this.buildHtml(t);e||(e='<li style="height:100px; line-height:100px; text-align:center; border-bottom:0 none">没有匹配数据</li>'),this.listUl.html(e)},buildHtml:function(t){var e="";for(var a in t){var n=t[a],i=n.id,r=n.salerid,s=n.terminal,o=n.imgpath,c=n.title||"无标题产品";e+='<li class="pItem" data-id="'+i+'" data-salerid="'+r+'" data-terminal="'+s+'" data-img="'+o+'">'+c+"</li>"}return e}});t.exports=i},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports='<%\r\n    var yearmonth=data.yearmonth,dates=data.dates;\r\n    var containerID = data.containerID;\r\n    var ym = yearmonth.split("-");\r\n    var year = ym[0];\r\n    var month = ym[1];\r\n%> <div id="<%=containerID%>-topCalendar" class=calendarHead> <div class=con><span id="<%=containerID%>-top-calendar-date" class=top-calendar-date></span></div> <a id="<%=containerID%>-monthNavBtnNext" class="monthNavBtn next" href=javascript:void(0)><i class=iconfont>&#xe60d;</i></a> <a id="<%=containerID%>-monthNavBtnPrev" class="monthNavBtn prev" href=javascript:void(0)><i class=iconfont>&#xe60c;</i></a> </div> <div id="<%=containerID%>-calendar-panel-<%=yearmonth%>" class=calendar-panel> <table id="calendar-table-<%=yearmonth%>" class=calendar-table> <thead id="<%=containerID%>-calendar-thead-<%=yearmonth%>" class=calendar-thead> <th data-yearmonth="<%=yearmonth%>" data-week=0> <label for="calendar-weeken-checkbox-<%=yearmonth%>-0">日</label> </th> <th data-yearmonth="<%=yearmonth%>" data-week=1> <label for="calendar-weeken-checkbox-<%=yearmonth%>-1">一</label> </th> <th data-yearmonth="<%=yearmonth%>" data-week=2> <label for="calendar-weeken-checkbox-<%=yearmonth%>-2">二</label> </th> <th data-yearmonth="<%=yearmonth%>" data-week=3> <label for="calendar-weeken-checkbox-<%=yearmonth%>-3">三</label> </th> <th data-yearmonth="<%=yearmonth%>" data-week=4> <label for="calendar-weeken-checkbox-<%=yearmonth%>-4">四</label> </th> <th data-yearmonth="<%=yearmonth%>" data-week=5> <label for="calendar-weeken-checkbox-<%=yearmonth%>-5">五</label> </th> <th data-yearmonth="<%=yearmonth%>" data-week=6> <label for="calendar-weeken-checkbox-<%=yearmonth%>-6">六</label> </th> </thead> <tbody id="<%=containerID%>-calendar-tbody-<%=yearmonth%>" class=calendar-tbody> <%_.each(dates,function(tr){%> <tr> <%_.each(tr,function(td){%> <%\r\n                            var date = td.date;\r\n                            var day = td.day;\r\n                            var weeken = td.weeken;\r\n                            var yearmonth = td.yearmonth;\r\n                        %> <%if(day){%> <td class="calendar-td day" data-day="<%=day%>" data-date="<%=date%>" data-yearmonth="<%=yearmonth%>" data-week="<%=weeken%>" id="<%=containerID%>-calendar-td-<%=date%>"> <div class=tdCon> <span class=dayNum><%=day%></span> </div> </td> <%}else{%> <td class="calendar-td empty"></td> <%}%> <% }) %> </tr> <% }) %> </tbody> </table> </div>'},function(t,e){t.exports='<% _.each(data,function(item,index){ %> <li class=orderItem id="orderItem-<%=item.ordernum%>" data-ordernum="<%=item.ordernum%>"> <div class=oTit> 联系人：<span class=contactor><%=item.ordername%></span><span class=mobile>电话：<%=item.ordertel%></span> <% if(item.status!=0){ %> <span class="flag status_<%=item.status%>"><%={\r\n                "0" : "未使用",\r\n                "1" : "已使用",\r\n                "2" : "已过期",\r\n                "3" : "已取消",\r\n                "4" : "凭证码被替代",\r\n                "5" : "被终端撤销(已取消)",\r\n                "6" : "被终端撤销(已使用)"\r\n            }[item.status]%></span> <% } %> <span class="flag pmode_<%=item.paystatus%>"><%={\r\n            0 : "景区到付",\r\n            1 : "已支付",\r\n            2 : "未支付"\r\n        }[item.paystatus]%></span> </div> <div class=itemCon> <div class=ltCon> <p class=line> <span class=lt>订单号：<span class=vhidden>订</span></span> <span class=rt><%=item.ordernum%></span> </p> <p class=line> <span class=lt>下单时间：</span> <span class=rt><%=item.ordertime%></span> </p> <p class=line> <span class=lt>游玩时间：</span> <span class=rt><%=item.begintime%></span> </p> </div> <div class=inCon> <% var tickets=item.tickets;%> <% if(tickets && tickets.length){ %> <ul class=ticketUl> <% _.each(tickets,function(ticket,ind){ %> <li class="ticketLi clearfix"> <div class=inpCtrol> <input class="tinp countInp" type=text value="<%=ticket.tnum%>" data-ptype=A data-maxnum="<%=ticket.tnum%>" data-mainordernum="<%=tickets[0].ordernum%>" data-ordernum="<%=ticket.ordernum%>"/> <span class=zhang>张</span> </div> <div class=trnameCol> <p class=tname>【<%=ticket.name%>】</p> <p class=bt> 共<em class="tnum total_tnum"><%=ticket.tnum_s ? ticket.tnum_s : 10%></em>张 <i class=vt></i> <%\r\n                                        var has_terminal=ticket.tnum_s-ticket.tnum;\r\n                                        if(has_terminal<0) has_terminal=0;\r\n                                    %> 已使用<em class="tnum has_terminal_tnum"><%=has_terminal%></em>张 <i class=vt></i> 待验证<em class="tnum un_terminal_tnum"><%=ticket.tnum%></em>张 </p> </div> </li> <% }) %> </ul> <div class=checkMethodBox> <% if(item.ptype!="F"){ %> <input type=radio checked=checked name=check_method value=0 id="check_method_<%=item.ordernum%>_0"/><label style=margin-right:15px for="check_method_<%=item.ordernum%>_0">取消余票</label> <input type=radio name=check_method value=1 id="check_method_<%=item.ordernum%>_1"/><label for="check_method_<%=item.ordernum%>_1">保留余票</label> <% }else{ %> <input type=radio checked=checked name=check_method value=1 id="check_method_<%=item.ordernum%>_1"/><label for="check_method_<%=item.ordernum%>_1">保留余票</label> <% } %> </div> <div class=doActionBox> <%\r\n                        var checkBtnCls = "";\r\n                        var orderStatus = item.status;\r\n                        var pmode = item.pmode;\r\n                        var payStatus = item.paystatus;\r\n                        if(orderStatus==1 || orderStatus==3 || orderStatus==5 || orderStatus==6 || (payStatus==2 && pmode!=4)){\r\n                            //已使用｜已取消｜被终端撤销(已取消)｜被终端撤销(已使用)|未支付\r\n                            //不能验证\r\n                            //已过期的订单(status==2)admin与普通帐号均可验证\r\n                            checkBtnCls = "disable";\r\n                        }\r\n                    %> <a class="checkBtn <%=checkBtnCls%>" data-ptype="<%=item.ptype%>" href=javascript:void(0) data-mainordernum="<%=tickets[0].ordernum%>">验 证</a> <% if(item.endtime){ %> <span class=termTimeWrap><input readonly=readonly class=termTimeInp type=text value="<%=item.endtime%>"/><i class=iconfont>&#xe65b;</i></span> <% } %> <span class=errorTip></span> </div> <% if(item.pmode==4){ %> <p class=payTypeTip>请先确认游客已现场付费，然后给予验证</p> <% } %> <% } %> </div> </div> </li> <% }) %>'}]);
//# sourceMappingURL=terminal.all.js.map
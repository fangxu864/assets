!function(t){function n(e){if(a[e])return a[e].exports;var r=a[e]={exports:{},id:e,loaded:!1};return t[e].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var a={};return n.m=t,n.c=a,n.p="http://static.12301dev.com/assets/build/dev/",n(0)}({0:function(t,n,a){a(89);var e=a(5),r=a(38),i=a(91),s=a(92),o=a(46),l=Backbone.View.extend({el:$("#memDetailContainer"),initialize:function(){var t=this,n=this.memberid=PFT.Util.UrlParse().id;this.pagination=new o({container:"#paginationContainer",keyup:!1,onNavigation:function(a){var e=a.toPage;t.getHistory(n,e)}}),this.getDetail(n),this.getHistory(n)},template:_.template(i),history_template:_.template(s),cache:!0,historyCache:{},getDetail:function(t){var n=this;return t?void PFT.Util.Ajax(e.Url.memdetail.detail,{params:{memberid:t},loading:function(){var t=r("加载中，请稍后..",{tag:"div",height:500,css:{background:"#fff"}});n.$el.html(t)},complete:function(){n.$el.html("")},success:function(t){t=t||{};var a=t.data||{};200==t.code?n.$el.html(n.template({data:a})):alert(t.msg||PFT.AJAX_ERROR_TEXT)}}):!1},getHistory:function(t,n,a){if(!t)return!1;n=n||1,a=a||1;var i=this,s=$("#historyListContainer"),o=this.history_template,l=this.pagination,c=this.historyCache[n];if(c&&this.cache){var d=c.page,p=c.total_page,u=c.list,m=o({data:u});s.html(m),l.render({current:d,total:p})}else PFT.Util.Ajax(e.Url.memdetail.history,{params:{memberid:t,page:n,page_size:a},loading:function(){var t=r("加载中，请稍后..",{tag:"tr",height:150,colspan:8,css:{background:"#fff"}});s.html(t),l.render(null)},complete:function(){s.html("")},success:function(t){t=t||{};var a=t.data||{};if(200==t.code){var e=a.page,r=a.total_page,c=a.list||[];0==c.length&&(r=0);var d=o({data:c});s.html(d),l.render({current:e,total:r}),i.historyCache[n]=a}else alert(t.msg||PFT.AJAX_ERROR_TEXT)}})}});$(function(){new l})},5:function(t,n){var a=function(){},e={Url:{PublishCardProd:{submit:"/r/product_scenic/save/",uploadFile:"/r/product_AnnualCard/uploadImg/",getInfo:"/r/product_scenic/get/"},PackageInfo:{updateTicket:"/r/product_ticket/UpdateTicket/",getPackageInfoList:"/r/product_ticket/ticket_attribute/",getLands:"/r/product_AnnualCard/getLands/",getTickets:"/r/product_AnnualCard/getTickets/",deleteTicket:"/route/index.php?c=product_ticket&a=set_status"},EntryCard:{getProdList:"/r/product_AnnualCard/getAnnualCardProducts/",createAnnualCard:"/r/product_AnnualCard/createAnnualCard/",getAnnualCards:"/r/product_AnnualCard/getAnnualCards/"},makeOrder:{getCardsForOrder:"/r/product_AnnualCard/getCardsForOrder/",getOrderInfo:"/r/product_AnnualCard/getOrderInfo/",isNeedToReplace:"/r/product_AnnualCard/isNeedToReplace/",submit:"/formSubmit_v01.php"},getVirtualStorage:"/r/product_AnnualCard/getVirtualStorage/",storage:{getList:"/r/product_AnnualCard/getAnnualCardStorage/",deleteAnnualCard:"/r/product_AnnualCard/deleteAnnualCard/"},ordersuccess:{getOrderDetail:"/r/product_AnnualCard/orderSuccess/"},active:{checkCard:"/r/product_AnnualCard/activeCheck/",getVCode:"/r/product_AnnualCard/sendVcode/",activateForPc:"/r/product_AnnualCard/activateForPc/"},mclist:{getList:"/r/product_AnnualCard/getMemberList/"},memdetail:{detail:"/r/product_AnnualCard/getMemberDetail/",history:"/r/product_AnnualCard/getHistoryOrder/"}},defaults:{type:"get",ttimout:6e4,loading:a,complete:a,success:a,fail:a,timeout:a,serverError:a}};t.exports=e},38:function(t,n){var a=function(t,n){t=t||"请稍后...",n=n||{};var a=n.tag||"div";"td"==a&&(a="tr");var e=n.width+"px"||"100%",r=n.height||150,i=n.loadingImg||{},s=i.width||24,o=i.top||0,l=n.className||"",c=n.colspan||1,d=n.id||"",p="",u=n.css||{},m="";for(var h in u)m+=h+":"+u[h]+"; ";var g="http://static.12301.cc/assets/build/images/gloading.gif";return p+="<"+a+' id="'+d+'" style="width:'+e+"; height:"+r+"px; line-height:"+r+"px; text-align:center; "+m+'" class="'+l+'">',"tr"!=a&&"td"!=a||(p+='<td style="text-align:center" colspan="'+c+'">'),p+='<img style="width:'+s+"px; position:relative; top:"+o+'px; vertical-align:middle; margin-right:5px" src="'+g+'"/>',p+='<span class="t">'+t+"</span>","tr"!=a&&"td"!=a||(p+="</td>"),p+="</"+a+">"};t.exports=a},46:function(t,n,a){function e(t){this.opt=$.extend(r,t||{}),this.init(this.opt)}a(47);var r={container:"",onNext:function(){},onPrev:function(){},onNavigation:function(){},keyup:!1};e.prototype={init:function(t){var n=this;this.tpl=a(49),this.container="string"==typeof t.container?$("#"+t.container.replace(/#/,"")):t.container,this.container.hide().html(this.tpl),this.currentPage=this.container.find(".whichPageInp"),this.totalPage=this.container.find(".totalPageInp"),this.nextBtn=this.container.find(".nextPageBtn"),this.prevBtn=this.container.find(".prevPageBtn"),t.keyup&&($(document).on("keyup",function(t){n.onKeyupToNav(t)}),this.container.find(".keyupTip").show()),this.container.on("click",".navBtn",function(t){n.onNavBtnClick(t)})},onNavBtnClick:function(t){var n=$(t.currentTarget);if(n.hasClass("disable"))return!1;var a=1*this.currentPage.text(),e=n.hasClass("next")?"next":"prev",r=n.hasClass("next")?a+1:a-1,i={dir:e,fromPage:a,toPage:r};"next"==e?(this.opt.onNavigation(i),this.opt.onNext(i),PFT.Util.PubSub.fire("navigation",i),PFT.Util.PubSub.fire("next",i)):(this.opt.onNavigation(i),this.opt.onPrev(i),PFT.Util.PubSub.fire("navigation",i),PFT.Util.PubSub.fire("prev",i))},onKeyupToNav:function(t){var n=t.keyCode,a=this.nextBtn,e=this.prevBtn,r=1*this.currentPage.text(),i=null;39!=n||a.hasClass("disable")?37!=n||e.hasClass("disable")||(i={dir:"next",fromPage:r,toPage:r-1},this.opt.onNavigation(i),this.opt.onPrev(i),PFT.Util.PubSub.fire("navigation",i),PFT.Util.PubSub.fire("prev",i)):(i={dir:"next",fromPage:r,toPage:r+1},this.opt.onNavigation(i),this.opt.onNext(i),PFT.Util.PubSub.fire("navigation",i),PFT.Util.PubSub.fire("next",i))},on:function(t,n){return t?(n="function"==typeof n?n:function(){},void PFT.Util.PubSub.on(t,n)):!1},show:function(){this.container.show()},hide:function(){this.container.hide()},getValue:function(){return{current:this.currentPage.text(),total:this.totalPage.text()}},render:function(t){if(!t)return this.nextBtn.addClass("disable"),this.prevBtn.addClass("disable"),void this.hide();var n=1*t.total,a=1*t.current,e=this.totalPage,r=this.currentPage,i=this.nextBtn,s=this.prevBtn;return 0==n?(this.nextBtn.addClass("disable"),this.prevBtn.addClass("disable"),void this.hide()):(this.show(),e.text(n),r.text(a),void(n>a?(1!=a?s.removeClass("disable"):s.addClass("disable"),i.removeClass("disable")):(1!=a?s.removeClass("disable"):s.addClass("disable"),i.addClass("disable"))))}},t.exports=e},47:function(t,n){},49:function(t,n){t.exports='<div class="navigationBar">\r\n    <div class="navCon">\r\n        <a href="javascript:void(0)" class="navBtn next nextPageBtn disable"><span class="iconfont">&#xe60d;</span></a>\r\n        <a href="javascript:void(0)" class="prevPageBtn navBtn prev disable"><span class="iconfont">&#xe60c;</span></a>\r\n        <div class="which">\r\n            <span class="whichPageInp pagenum">1</span>\r\n            <span class="var"> / </span>\r\n            <span class="totalPageInp pagenum">1</span>\r\n        </div>\r\n    </div>\r\n    <p style="display:none" class="tip keyupTip">亲，可以使用键盘前后方向键来翻页哟</p>\r\n</div>'},89:function(t,n){},91:function(t,n){t.exports='<% var member=data.member, list=data.list || [], history=data.history; %>\r\n<% var statusTxt = {"1":"正常","0":"未激活","2":"禁用","4":"挂失"}; %>\r\n<div class="memberBox" style="background:#e2f6fe">\r\n    <span class="memberH">H</span>\r\n    <ul class="memUl">\r\n        <li>\r\n            <p><span class="memL">会员名称：</span><span class="memR"><%=member.account%></span></p>\r\n        </li>\r\n        <li>\r\n            <p><span class="memL">手机号：</span><span class="memR"><%=member.mobile%></span></p>\r\n        </li>\r\n    </ul>\r\n</div>\r\n<%_.each(list,function(item){%>\r\n<div style="background:#fff; border-top:1px solid #e5e5e5" class="memberBox">\r\n    <ul class="memUl marL-70">\r\n            <li>\r\n                <p><span class="memL">虚拟卡号：</span><span class="memR"><%=item.virtual_no%></span></p>\r\n                <p><span class="memL">实体卡号：</span><span class="memR"><%=item.card_no%></span></p>\r\n                <p><span class="memL">物理ID：</span><span class="memR"><%=item.physics_no%></span></p>\r\n                <!--<p><span class="memL">可用优惠券：</span><span class="memR">0</span></p>-->\r\n                <p><span class="memL">发卡商户：</span><span class="memR"><%=item.supply%></span></p>\r\n            </li>\r\n            <li>\r\n                <p><span class="memL">卡套餐：</span><span class="memR">无</span></p>\r\n                <p><span class="memL">有效期：</span><span class="memR"><%=item.valid_time%></span></p>\r\n                <div class="memLine">\r\n                    <span class="memL">已用特权：</span>\r\n                    <div class="memR">\r\n                        <%_.each(item.priv,function(priv){%>\r\n                            <p><%=priv.title%> <%=priv.use%></p>\r\n                        <%})%>\r\n                    </div>\r\n                </div>\r\n                <p><span class="memL">状态：</span><span class="memR font-orange"><a href="javascript:void(0);" class="unActivate"><%=statusTxt[item.status]%></a></span></p>\r\n                <p><span class="memL">备注：</span></p>\r\n            </li>\r\n    </ul>\r\n</div>\r\n<%})%>\r\n\r\n'},92:function(t,n){t.exports='<% if(data.length){ %>\r\n    <%_.each(data,function(item,index){%>\r\n        <tr class="<%=index!=data.length-1? \'border-bottom\' : \'\'%>">\r\n            <td class="font-blue"><%=item.ordernum%></td>\r\n            <td><%=item.ltitle%> - <%=item.title%></td>\r\n            <td></td>\r\n            <td><%=item.totalmoney%></td>\r\n            <td class="font-orange">-100</td>\r\n            <td class="font-orange">-10</td>\r\n            <td class="font-orange">123</td>\r\n            <td>2016/05/06 12:00</td>\r\n        </tr>\r\n    <% }) %>\r\n<% }else{ %>\r\n<tr>\r\n    <td style="text-align:center; height:300px" colspan="8">暂无使用记录...</td>\r\n</tr>\r\n<% } %>\r\n\r\n\r\n'}});
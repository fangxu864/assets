!function(t){function i(e){if(r[e])return r[e].exports;var n=r[e]={exports:{},id:e,loaded:!1};return t[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var r={};return i.m=t,i.c=r,i.p="http://static.12301dev.com/assets/build/dev/",i(0)}({0:function(t,i,r){r(25);var e=r(27),n=r(28),a=r(30),s=Backbone.View.extend({el:$("#cardContainer"),events:{},initialize:function(){this.UserInfo=new e,this.CardList=new n,this.OrderInfo=new a}});$(function(){new s})},12:function(t,i){var r=function(){},e={Url:{PublishCardProd:{submit:"/r/product_scenic/save/",uploadFile:"/r/product_AnnualCard/uploadImg/",getInfo:"/r/product_scenic/get/"},PackageInfo:{updateTicket:"/r/product_ticket/UpdateTicket/",getPackageInfoList:"/r/product_ticket/ticket_attribute/",getLands:"/r/product_AnnualCard/getLands/",getTickets:"/r/product_AnnualCard/getTickets/",deleteTicket:"/route/index.php?c=product_ticket&a=set_status"},EntryCard:{getProdList:"/r/product_AnnualCard/getAnnualCardProducts/",createAnnualCard:"/r/product_AnnualCard/createAnnualCard/",getAnnualCards:"/r/product_AnnualCard/getAnnualCards/",deleteAnnualCard:"/r/product_AnnualCard/deleteAnnualCard/"},makeOrder:{getCardsForOrder:"/r/product_AnnualCard/getCardsForOrder/",getOrderInfo:"/r/product_AnnualCard/getOrderInfo/"},getVirtualStorage:"/r/product_AnnualCard/getVirtualStorage/"},defaults:{type:"get",ttimout:6e4,loading:r,complete:r,success:r,fail:r,timeout:r,serverError:r}};t.exports=e},25:function(t,i){},27:function(t,i){var r=Backbone.View.extend({el:$("#userInfoContainer"),events:{"focus .validateInp":"onTextInpFocus","blur .validateInp":"onTextInpBlur"},initialize:function(){this.nameInp=$("#userinfo_nameInp"),this.mobileInp=$("#userinfo_mobileInp"),this.idCardInp=$("#userinfo_idCardInp"),this.noteInp=$("#userinfo_noteInp"),this.nameError=this.nameInp.parent().find(".tip"),this.mobileError=this.mobileInp.parent().find(".tip"),this.idCardError=this.idCardInp.parent().find(".tip")},onTextInpFocus:function(t){var i=$(t.currentTarget),r=i.parent().find(".tip");r.removeClass("error").text("userinfo_idCardInp"==i.attr("id")?"(可选项)":"(必填项)")},onTextInpBlur:function(t){var i=$(t.currentTarget),r=i.attr("name"),e=$.trim(i.val()),n="";"name"==r?this.validateName(e)&&this.nameError.addClass("error"):"mobile"==r?(n=this.validateMobile(e),n&&this.mobileError.addClass("error").text(n)):"id_card"==r&&(n=this.validateIDCard(e),n&&this.idCardError.addClass("error").text(n))},validateName:function(t){return""==t?"请填写购买人姓名":void 0},validateMobile:function(t){return""==t?"(必填项)":PFT.Util.Validate.typePhone(t)?void 0:"请输入正确格式手机号"},validateIDCard:function(t){return t&&!PFT.Util.Validate.idcard(t)?"请输入正确身份证号":void 0},getUserInfo:function(){var t=$.trim(this.nameInp.val()),i=$.trim(this.mobileInp.val()),r=$.trim(this.idCardInp.val()),e=this.noteInp.val();return this.nameInp.blur(),this.mobileInp.blur(),this.idCardInp.blur(),{name:this.validateName(t)?"error":t,mobile:this.validateMobile(i)?"error":i,id_card:this.validateIDCard(r)?"error":r,note:e}}});t.exports=r},28:function(t,i,r){var e=r(12),n=r(29),a=Backbone.View.extend({el:$("#cardMsgListUl"),loading_str:n("请稍后",{tag:"li",height:100}),initialize:function(){var t=PFT.Util.UrlParse(),i=this.pid=t.pid,r=this.physics=t.physics;return i?(this.getList(i,r),void this.$el.html(this.loading_str)):alert("缺少pid")},getList:function(t,i){var r=this;i=i||"",PFT.Util.Ajax(e.Url.makeOrder.getCardsForOrder,{params:{pid:t,physics:i},loading:function(){r.renderList("loading")},complete:function(){r.renderList("complete")},success:function(t){t=t||{},200==t.code?r.renderList(t.data):r.renderList(t.msg||PFT.AJAX_ERROR_TEXT)}})},renderList:function(t){var i="";if("loading"==t)i=this.loading_str;else if("complete"==t)i="";else if("[object Array]"==Object.prototype.toString.call(t)){for(var r in t){var e=t[r],n=e.virtual_no,a=e.sid,s=e.physics_no,l=e.card_no||"无";i+='<li data-sid="'+a+'" data-virtual="'+n+'" data-card="'+l+'" data-physics="'+s+'" class="border cardItem"><p>虚拟卡号：'+n+"</p><p>实体卡号："+l+"</p><p>物理ID："+s+"</p></li>"}i||(i+='<li class="status empty" style="height:100px; line-height:100px; text-align:center">无查卡信息</li>')}else i='<li class="status fail" style="height:100px; line-height:100px; text-align:center">'+t+"</li>";this.$el.html(i)}});t.exports=a},29:function(t,i){var r=function(t,i){t=t||"请稍后...",i=i||{};var r=i.tag||"div",e=i.width+"px"||"100%",n=i.height||150,a=i.loadingImg||{},s=a.width||24,l=a.top||0,d=i.className||"",o=i.colspan||1,c=i.id||"",p="",u=i.css||{},m="";for(var h in u)m+=h+":"+u[h]+"; ";var g="http://static.12301.cc/assets/build/images/gloading.gif";return p+="<"+r+' id="'+c+'" style="width:'+e+"; height:"+n+"px; line-height:"+n+"px; text-align:center; "+m+'" class="'+d+'">',"tr"!=r&&"td"!=r||(p+='<td colspan="'+o+'">'),p+='<img style="width:'+s+"px; position:relative; top:"+l+'px; vertical-align:middle; margin-right:5px" src="'+g+'"/>',p+='<span class="t">'+t+"</span>","tr"!=r&&"td"!=r||(p+="</td>"),p+="</"+r+">"};t.exports=r},30:function(t,i,r){var e=(r(12),r(29)),n=r(31),a=Backbone.View.extend({initialize:function(){return this.listUl=$("#orderInfoList"),this.urlParams=PFT.Util.UrlParse(),this.getInfo()},template:_.template(n),getInfo:function(t,i,r){var e=this.listUl,n=this.renderInfo({product:{ltitle:"mm--测试景点",title:"优惠票",price:1,storage:"1"},privileges:[{tid:"25786",limit_count:"1,2,3",title:"三人票",pid:"22874",ltitle:"九顶塔"},{tid:"28274",limit_count:"2,3,4",title:"成人票",pid:"25271",ltitle:"测试景区0308003"}],pay:{is_self:0,remain:49.63,credit:"6.61"},supplier:{name:"慢慢的店铺",linkman:"18750178296",intro:""}});return e.html(n),!1},renderInfo:function(t){var i="";return i="loading"==t?e("请稍后...",{tag:"tr",colspan:6,height:100}):this.template({data:t})}});t.exports=a},31:function(t,i){t.exports='<tr>\r\n    <td>\r\n        <p><%=data.product.title%></p>\r\n        <% if(data.privileges.length){ %>\r\n            <p>包含：</p>\r\n            <%_.each(data.privileges,function(item,index){%>\r\n                <%\r\n                    var limit_count = item.limit_count;\r\n                    var limit_str = "";\r\n                    if(limit_count=="-1"){\r\n                        limit_str = "不限使用次数";\r\n                    }else{\r\n                        limit_str = "限制使用：";\r\n                        limit_count = limit_count.split(",");\r\n                        var daily = limit_count[0];\r\n                        var month = limit_count[1];\r\n                        var total = limit_count[1];\r\n                        if(daily!="-1") limit_str += daily + "次/日 ";\r\n                        if(month!="-1") limit_str += month + "次/月 ";\r\n                        if(total!="-1") limit_str += " 共"+total+"次";\r\n                    }\r\n                %>\r\n                <p class="privItem" data-tid="<%=item.tid%>" data-pid="<%=item.pid%>">\r\n                    <span class="title">\r\n                        <span class="ltitle"><%=item.ltitle%></span>\r\n                        -\r\n                        <span class="ttitle"><%=item.title%></span>\r\n                    </span>\r\n                    <span class="limit"><%=limit_str%></span>\r\n                </p>\r\n            <% }) %>\r\n        <% } %>\r\n    </td>\r\n    <td><%=data.product.storage%></td>\r\n    <td><i class="yen">&yen;</i><em class="price"><%=data.product.price%></em></td>\r\n    <td>不可退</td>\r\n    <td>1</td>\r\n    <td class="font-red"><i class="yen">&yen;</i><em class="total_price"><%=data.product.price%></em></td>\r\n</tr>'}});
<!-- Author: huangzhiyang -->
<!-- Date: 2016/6/1 14:55 -->
<!-- Description: huangzhiyang -->
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <title>激活</title>
</head>
<body style="padding:50px 0">
    <link rel="stylesheet" href="http://static.12301.cc/assets/build/css/common/reset_style.css"/>
    <link rel="stylesheet" href="http://www.12301.cc/css/default.css"/>
    <link rel="stylesheet" href="http://www.12301.cc/css/common/www.12301.cc.global.css"/>
    <script type="text/javascript" src="http://www.12301.cc/js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="http://static.12301.cc/assets/build/lib/backbone-min.js"></script>
    <script type="text/javascript" src="http://static.12301.cc/assets/build/js/common/pft.common.all.min.js"></script>


    <link rel="stylesheet" href="http://localhost:9090/assets/build/css/publish_card_activate/all.css"/>
    <div class="cardContainer">
        <p class="entry border-bottom">激活</p>
        <div class="line">
            <div class="lt">
                <span class="font-red">*</span>实体卡卡号：
            </div>
            <div class="rt">
                <div>
                    <input type="text" class="textInp" id="cardNum"/><a href="javascript:void(0);" class="btn btn-border cardBtn" id="cardBtn">刷卡</a>
                </div>
                <p class="actip">
                    <i class="acSpan">已激活！</i>
                    <i>会员号：H45522</i>
                    <i>物理ID：54665566</i>
                </p>
            </div>
        </div>
        <div class="line">
            <div class="lt">
                <span class="font-red">*</span>手机号：
            </div>
            <div class="rt">
                <input type="text" class="textInp" id="phoneNum"/><a href="javascript:void(0);" class="btn btn-border cardBtn" id="codeBtn">获取验证码</a>
            </div>
        </div>
        <div class="line">
            <div class="lt">
                <span class="font-red">*</span>短信验证码：
            </div>
            <div class="rt">
                <input type="text" class="textInp" id="codeNum"/>
            </div>
        </div>
        <div class="line">
            <div class="lt">
                <span class="font-red">*</span>身份证号：
            </div>
            <div class="rt">
                <input type="text" class="textInp" id="idNum"/>
            </div>
        </div>
        <div class="line">
            <div class="lt">
                <span class="font-red">*</span>会员名称：
            </div>
            <div class="rt">
                <input type="text" class="textInp" id="memName"/>
            </div>
        </div>
        <div class="line">
            <div class="lt">
                <span class="font-red">*</span>备注：
            </div>
            <div class="rt">
                <input type="text" class="textInp"/>
            </div>
        </div>
        <a href="javascript:void(0);" class="activate" id="activateBtn">激活</a>
    </div>
    <div class="memberBox border" id="memberBox" style="display:none;">
        <p class="memP">会员已存在！是否替换原有卡和套餐？</p>
        <table class="memTable border">
            <thead>
            <tr class="font-gray">
                <th>手机号</th>
                <th>身份证</th>
                <th>卡套餐（已用特权数）</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>145585686888 </td>
                <td>256339747443333</td>
                <td>三亚年卡套餐（5/20）</td>
            </tr>
            </tbody>
        </table>
        <div class="btnBox">
            <a href="javascript:;" class="btn btn-blue" id="replaceBtn">替换</a>
            <a href="javascript:;" class="btn btn-border" id="messageBtn">更换信息激活</a>
        </div>
    </div>
    <div class="payCard border" id="payCard" style="display:none;">
        <a href="javascript:void(0);" class="btn-del">×</a>
        <p>请刷卡</p>
    </div>
    <script type="text/javascript">

        $(function(){
            $("input").each(function(){
                var $tip = $("<span class='errorTip'></span>");
                $(this).parent().append($tip);
            });
            // 验证实体卡卡号
            $('#cardNum').blur(function(){
                if($(this).val().length ==10){
                    $(this).siblings('.errorTip').text('');
                    ok1=true;
                }else if( $(this).val()==''){
                    $(this).siblings('.errorTip').text('请输入实体卡卡号');
                }
            });
            // 验证手机号
            $('#phoneNum').blur(function(){
                if($(this).val().length ==11){
                    $(this).siblings('.errorTip').text('');
                    ok2=true;
                }else if($(this).val().length !=11 && $(this).val()!=''){
                    $(this).siblings('.errorTip').text('手机号有误');
                }else{
                    $(this).siblings('.errorTip').text('请输入手机号');
                }
            });
            // 验证短信验证码
            $('#codeNum').blur(function(){
                if($(this).val().length ==6){
                    $(this).siblings('.errorTip').text('');
                    ok3=true;
                }else if($(this).val().length !=6 && $(this).val()!=''){
                    $(this).siblings('.errorTip').text('验证码有误');
                }else{
                    $(this).siblings('.errorTip').text('请输入短信验证码');
                }
            });
            // 验证身份证号
            $('#idNum').blur(function(){
                if($(this).val().length ==18){
                    $(this).siblings('.errorTip').text('');
                    ok4=true;
                }else if($(this).val().length !=18 && $(this).val()!=''){
                    $(this).siblings('.errorTip').text('身份证号格式有误');
                }else{
                    $(this).siblings('.errorTip').text('请输入身份证号');
                }
            });
            // 验证会员名称
            $('#memName').blur(function(){
                if($(this).val().length ==6){
                    $(this).siblings('.errorTip').text('');
                    ok5=true;
                }else if($(this).val().length !=6 && $(this).val()!=''){
                    $(this).siblings('.errorTip').text('会员名称有误');
                }else{
                    $(this).siblings('.errorTip').text('请输入会员名称');
                }
            });
//            $('#phoneNum,#memName').blur(function(){
//                if(ok2&&ok5){
//                    $('#activateBtn').removeClass("disable").addClass("activate");
//                }else{
//                    $('#activateBtn').addClass("disable").removeClass("activate");
//                }
//            })
            //激活弹出
            $('#activateBtn').click(function(){
                $("input").trigger('blur');
                if(ok1&&ok2&&ok3&&ok4&&ok5){
                    $("#memberBox").show();
                }else{
                    return false;
                }
            });
            $("#replaceBtn,#messageBtn").click(function(){
                $("#memberBox").hide();
            })
            $("#cardBtn").click(function(){
                $("#payCard").show();
            })
            $(".btn-del").click(function(){
                $("#payCard").hide();
            })
        })

//        $btn.click(function(){
//            if($btn.hasClass("disable")) return false;
//            $btn.addClass("disable").text("loading...");
//            $.ajax({
//                url : "http://www.12301.local/r/c/a/",
//                type : "post",
//                dataType : "json",
//                data : {
//                    "card_number" : $("#cardNum").val()
//                },
//                success : function(res){
//                    $btn.removeClass("disable").text("");
//                    res = {
//                        code : 200,
//                        data : {},
//                        msg : ""
//                    }
//                    if(res.code==200){
//                        alert("save success");
//                    }else{
//                        alert(msg);
//                    }
//                },
//                error : function(){
//                    alert("请求出凑");
//                }
//            })
//        })





    </script>





</body>
</html>